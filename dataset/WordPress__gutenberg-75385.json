{
  "instance_id": "WordPress__gutenberg-75385",
  "repo": "WordPress/gutenberg",
  "base_commit": "30b43b805695ea0ff215716b9f14cf5c57a4db55",
  "version": "unknown",
  "created_at": "2026-02-13T22:30:53.111571+00:00",
  "problem_statement": "Use contextual snackbar text when activating a theme from preview\n\nActivating a theme while previewing from the site editor shows a \"Site updated\" Snackbar notification. \r\n\r\nInstead it should render \"Theme activated.\"\r\n\r\nHere's the snackbar when a theme has been activated: \r\n\r\n![CleanShot 2023-12-07 at 14 31 56](https://github.com/WordPress/gutenberg/assets/1813435/ee40df21-96ae-4cb6-a60a-061f8ce073b6)",
  "patch": "diff --git a/packages/edit-site/src/components/save-panel/index.js b/packages/edit-site/src/components/save-panel/index.js\nindex 95aefb0329..ca7325d4be 100644\n--- a/packages/edit-site/src/components/save-panel/index.js\n+++ b/packages/edit-site/src/components/save-panel/index.js\n@@ -37,11 +37,13 @@ const EntitiesSavedStatesForPreview = ( {\n \tvariant,\n } ) => {\n \tconst isDirtyProps = useEntitiesSavedStatesIsDirty();\n-\tlet activateSaveLabel;\n+\tlet activateSaveLabel, successNoticeContent;\n \tif ( isDirtyProps.isDirty ) {\n \t\tactivateSaveLabel = __( 'Activate & Save' );\n+\t\tsuccessNoticeContent = __( 'Theme activated and site updated.' );\n \t} else {\n \t\tactivateSaveLabel = __( 'Activate' );\n+\t\tsuccessNoticeContent = __( 'Theme activated.' );\n \t}\n \n \tconst currentTheme = useActualCurrentTheme();\n@@ -81,6 +83,7 @@ const EntitiesSavedStatesForPreview = ( {\n \t\t\t\tsaveLabel: activateSaveLabel,\n \t\t\t\trenderDialog,\n \t\t\t\tvariant,\n+\t\t\t\tsuccessNoticeContent,\n \t\t\t} }\n \t\t/>\n \t);\ndiff --git a/packages/editor/src/components/entities-saved-states/index.js b/packages/editor/src/components/entities-saved-states/index.js\nindex d9560351b8..e90104a27d 100644\n--- a/packages/editor/src/components/entities-saved-states/index.js\n+++ b/packages/editor/src/components/entities-saved-states/index.js\n@@ -72,6 +72,7 @@ export default function EntitiesSavedStates( {\n  * @param {Function} props.setUnselectedEntities Function to set unselected entities.\n  * @param {Array}    props.unselectedEntities    Array of unselected entities.\n  * @param {string}   props.variant               Changes the layout of the component. When an `inline` value is provided, the action buttons are rendered at the end of the component instead of at the start.\n+ * @param {string}   props.successNoticeContent  Optional custom success notice content.\n  *\n  * @return {React.ReactNode} The rendered component.\n  */\n@@ -87,6 +88,7 @@ export function EntitiesSavedStatesExtensible( {\n \tsetUnselectedEntities,\n \tunselectedEntities,\n \tvariant = 'default',\n+\tsuccessNoticeContent,\n } ) {\n \tconst saveButtonRef = useRef();\n \tconst { saveDirtyEntities } = unlock( useDispatch( editorStore ) );\n@@ -162,6 +164,7 @@ export function EntitiesSavedStatesExtensible( {\n \t\t\t\t\t\tdirtyEntityRecords,\n \t\t\t\t\t\tentitiesToSkip: unselectedEntities,\n \t\t\t\t\t\tclose,\n+\t\t\t\t\t\tsuccessNoticeContent,\n \t\t\t\t\t} )\n \t\t\t\t}\n \t\t\t\tclassName=\"editor-entities-saved-states__save-button\"\ndiff --git a/packages/editor/src/store/private-actions.js b/packages/editor/src/store/private-actions.js\nindex a1209a26bf..de0e909399 100644\n--- a/packages/editor/src/store/private-actions.js\n+++ b/packages/editor/src/store/private-actions.js\n@@ -124,14 +124,21 @@ export const hideBlockTypes =\n /**\n  * Save entity records marked as dirty.\n  *\n- * @param {Object}   options                      Options for the action.\n- * @param {Function} [options.onSave]             Callback when saving happens.\n- * @param {object[]} [options.dirtyEntityRecords] Array of dirty entities.\n- * @param {object[]} [options.entitiesToSkip]     Array of entities to skip saving.\n- * @param {Function} [options.close]              Callback when the actions is called. It should be consolidated with `onSave`.\n+ * @param {Object}   options                        Options for the action.\n+ * @param {Function} [options.onSave]               Callback when saving happens.\n+ * @param {object[]} [options.dirtyEntityRecords]   Array of dirty entities.\n+ * @param {object[]} [options.entitiesToSkip]       Array of entities to skip saving.\n+ * @param {Function} [options.close]                Callback when the actions is called. It should be consolidated with `onSave`.\n+ * @param {string}   [options.successNoticeContent] Optional custom success notice content. Defaults to 'Site updated.'.\n  */\n export const saveDirtyEntities =\n-\t( { onSave, dirtyEntityRecords = [], entitiesToSkip = [], close } = {} ) =>\n+\t( {\n+\t\tonSave,\n+\t\tdirtyEntityRecords = [],\n+\t\tentitiesToSkip = [],\n+\t\tclose,\n+\t\tsuccessNoticeContent,\n+\t} = {} ) =>\n \t( { registry } ) => {\n \t\tconst PUBLISH_ON_SAVE_ENTITIES = [\n \t\t\t{ kind: 'postType', name: 'wp_navigation' },\n@@ -209,17 +216,20 @@ export const saveDirtyEntities =\n \t\t\t\t} else {\n \t\t\t\t\tregistry\n \t\t\t\t\t\t.dispatch( noticesStore )\n-\t\t\t\t\t\t.createSuccessNotice( __( 'Site updated.' ), {\n-\t\t\t\t\t\t\ttype: 'snackbar',\n-\t\t\t\t\t\t\tid: saveNoticeId,\n-\t\t\t\t\t\t\tactions: [\n-\t\t\t\t\t\t\t\t{\n-\t\t\t\t\t\t\t\t\tlabel: __( 'View site' ),\n-\t\t\t\t\t\t\t\t\turl: homeUrl,\n-\t\t\t\t\t\t\t\t\topenInNewTab: true,\n-\t\t\t\t\t\t\t\t},\n-\t\t\t\t\t\t\t],\n-\t\t\t\t\t\t} );\n+\t\t\t\t\t\t.createSuccessNotice(\n+\t\t\t\t\t\t\tsuccessNoticeContent || __( 'Site updated.' ),\n+\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\ttype: 'snackbar',\n+\t\t\t\t\t\t\t\tid: saveNoticeId,\n+\t\t\t\t\t\t\t\tactions: [\n+\t\t\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\t\t\tlabel: __( 'View site' ),\n+\t\t\t\t\t\t\t\t\t\turl: homeUrl,\n+\t\t\t\t\t\t\t\t\t\topenInNewTab: true,\n+\t\t\t\t\t\t\t\t\t},\n+\t\t\t\t\t\t\t\t],\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t);\n \t\t\t\t}\n \t\t\t} )\n \t\t\t.catch( ( error ) =>\n",
  "test_patch": "diff --git a/test/e2e/specs/site-editor/activate-theme.spec.js b/test/e2e/specs/site-editor/activate-theme.spec.js\nindex a5fb4b3be0..b786252d14 100644\n--- a/test/e2e/specs/site-editor/activate-theme.spec.js\n+++ b/test/e2e/specs/site-editor/activate-theme.spec.js\n@@ -23,7 +23,7 @@ test.describe( 'Activate theme', () => {\n \t\t\t.click();\n \t\tawait expect(\n \t\t\tpage.getByRole( 'button', { name: 'Dismiss this notice' } )\n-\t\t).toContainText( 'Site updated' );\n+\t\t).toContainText( 'Theme activated.' );\n \t\tawait admin.visitAdminPage( 'themes.php' );\n \t\tawait expect( page.getByLabel( 'Customize Emptytheme' ) ).toBeVisible();\n \t} );\n@@ -36,6 +36,10 @@ test.describe( 'Activate theme', () => {\n \t\tawait expect( page.locator( '.edit-site-canvas-loader' ) ).toHaveCount(\n \t\t\t0\n \t\t);\n+\t\t// Disable welcome guide to prevent onboarding modal from appearing.\n+\t\tawait editor.setPreferences( 'core/edit-site', {\n+\t\t\twelcomeGuide: false,\n+\t\t} );\n \t\tawait editor.canvas.locator( 'body' ).click();\n \t\tawait page\n \t\t\t.getByRole( 'region', { name: 'Editor top bar' } )\n@@ -46,7 +50,7 @@ test.describe( 'Activate theme', () => {\n \t\t\t.click();\n \t\tawait expect(\n \t\t\tpage.getByRole( 'button', { name: 'Dismiss this notice' } )\n-\t\t).toContainText( 'Site updated' );\n+\t\t).toContainText( 'Theme activated.' );\n \t\tawait admin.visitAdminPage( 'themes.php' );\n \t\tawait expect( page.getByLabel( 'Customize Emptytheme' ) ).toBeVisible();\n \t} );\n",
  "hints_text": "",
  "environment_setup_commit": "30b43b805695ea0ff215716b9f14cf5c57a4db55",
  "install_config": {
    "python": "3.9",
    "packages": "requirements.txt",
    "install": "npm install && composer install",
    "test_cmd": "npm test",
    "pre_install": [],
    "reqs_path": [],
    "env_yml_path": [],
    "pip_packages": []
  },
  "meta": {
    "commit_name": "head_commit",
    "num_modified_files": 3,
    "has_test_patch": true,
    "is_lite": true,
    "llm_score": {
      "difficulty_score": null,
      "issue_text_score": null,
      "test_score": null
    }
  },
  "license_name": "AGPL-3.0",
  "FAIL_TO_PASS": [],
  "PASS_TO_PASS": [],
  "requirements": "",
  "environment": ""
}